# 모델 변경 기능 테스트 가이드

## 방법 1: Unity 에디터 직접 테스트 ⭐ (추천)

### 준비 작업:
1. **Resources 폴더에 테스트용 3D 모델 준비**
   ```
   Assets/Resources/
   ├── Tshirt.prefab (또는 .fbx)
   ├── Shirt.prefab  
   ├── Pants.prefab
   └── Shorts.prefab
   ```

2. **씬 설정** (씬_설정_가이드.md 참고)
   - WebGLManager + WebGLCommunicator
   - ClothingDisplay + ClothingModel
   - ModelParent, CameraTarget 설정

### 테스트 방법:
1. **Play 모드 진입**
2. **Console에서 확인**: "옷 데이터 로드 완료: 2개"
3. **Inspector에서 테스트**:
   ```
   ClothingModel 컴포넌트에서
   → ChangeClothing() 메서드 직접 호출
   → Parameter에 "tshirt_001" 입력
   ```

4. **결과 확인**:
   - ModelParent 하위에 Tshirt(Clone) 생성되는지 확인
   - Scene 뷰에서 3D 모델이 보이는지 확인

## 방법 2: 간단한 HTML 테스트 페이지

### WebGL 빌드 후:
```html
<!DOCTYPE html>
<html>
<head>
    <title>의류 뷰어 테스트</title>
    <style>
        body { font-family: Arial; }
        #unity-container { width: 800px; height: 600px; }
        .button { padding: 10px; margin: 5px; font-size: 16px; }
    </style>
</head>
<body>
    <h1>의류 뷰어 테스트</h1>
    
    <div id="unity-container">
        <!-- Unity WebGL 로드 -->
    </div>
    
    <div id="controls">
        <button class="button" onclick="changeClothing('tshirt_001')">티셔츠</button>
        <button class="button" onclick="changeClothing('shorts_001')">반바지</button>
        <br><br>
        <button class="button" onclick="getOutfitList()">옷 목록 보기</button>
        <button class="button" onclick="hideModel()">모델 숨기기</button>
        <button class="button" onclick="showModel()">모델 보이기</button>
    </div>
    
    <div id="log">
        <h3>로그:</h3>
        <div id="messages"></div>
    </div>

    <script>
        var unityInstance = null;
        
        // Unity 로드 완료 후 설정
        function onUnityLoaded(instance) {
            unityInstance = instance;
            logMessage("Unity 로드 완료!");
        }
        
        function changeClothing(outfitId) {
            if (!unityInstance) {
                logMessage("Unity가 아직 로드되지 않았습니다.");
                return;
            }
            
            logMessage(`옷 변경 요청: ${outfitId}`);
            unityInstance.SendMessage('WebGLManager', 'ChangeClothingFromWeb', outfitId);
        }
        
        function getOutfitList() {
            if (!unityInstance) return;
            unityInstance.SendMessage('WebGLManager', 'GetAvailableOutfits', '');
        }
        
        function hideModel() {
            if (!unityInstance) return;
            unityInstance.SendMessage('WebGLManager', 'HideModelFromWeb', '');
        }
        
        function showModel() {
            if (!unityInstance) return;
            unityInstance.SendMessage('WebGLManager', 'ShowModelFromWeb', '');
        }
        
        // Unity에서 오는 메시지 처리
        function receiveMessage(message) {
            logMessage(`Unity → 웹: ${message}`);
            
            if (message === 'unityReady') {
                logMessage("✅ Unity 준비 완료!");
            } else if (message.startsWith('clothingChanged:')) {
                const outfitId = message.split(':')[1];
                logMessage(`✅ 옷 변경 완료: ${outfitId}`);
            } else if (message.startsWith('availableOutfits:')) {
                const outfits = message.substring('availableOutfits:'.length);
                logMessage(`📋 사용 가능한 옷: ${outfits}`);
            }
        }
        
        function logMessage(msg) {
            const messages = document.getElementById('messages');
            const div = document.createElement('div');
            div.textContent = `${new Date().toLocaleTimeString()}: ${msg}`;
            messages.appendChild(div);
            messages.scrollTop = messages.scrollHeight;
            console.log(msg);
        }
        
        // Unity 메시지 리스너 설정
        window.addEventListener('message', function(event) {
            if (typeof event.data === 'string') {
                receiveMessage(event.data);
            }
        });
    </script>
</body>
</html>
```

## 방법 3: 텍스처 기능 임시 비활성화

ClothingModel의 ApplyTexture() 호출을 주석 처리하여 모델만 테스트:

```csharp
private void LoadAndDisplayModel()
{
    // ... 모델 로드 코드 ...
    
    // 텍스처 적용 (임시 비활성화)
    // ApplyTexture();
    
    Debug.Log($"옷 모델 표시 완료: {currentOutfit.outfitName}");
}
```

## 테스트 체크리스트

### ✅ 확인할 것들:
1. **Console 로그**:
   - "옷 데이터 로드 완료: 2개"
   - "옷 변경 요청: tshirt_001"
   - "옷 모델 표시 완료: 기본 티셔츠"

2. **Hierarchy 변화**:
   - ModelParent 하위에 모델 오브젝트 생성
   - 옷 변경 시 기존 모델 삭제 → 새 모델 생성

3. **Scene/Game 뷰**:
   - 3D 모델이 화면에 표시되는지
   - 카메라가 올바른 위치에서 모델을 바라보는지

### 🔧 문제 해결:
- **"3D 모델을 찾을 수 없습니다"**: Resources 폴더에 해당 이름의 prefab 확인
- **모델이 보이지 않음**: CameraTarget과 ModelParent 위치 확인
- **"OutfitDataLoader not found"**: 스크립트 참조 연결 확인

이 방법들로 텍스처 없이도 모델 변경 기능을 완전히 테스트할 수 있습니다! 🚀