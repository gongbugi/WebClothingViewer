# 서버 구현 가이드

## 1. 옷 데이터 JSON API 엔드포인트

### Node.js/Express 예시:
```javascript
// server.js
const express = require('express');
const cors = require('cors');
const app = express();

app.use(cors());
app.use(express.static('public')); // 정적 파일 제공

// 옷 데이터 API
app.get('/api/outfits', (req, res) => {
    const outfits = {
        "outfits": [
            {
                "id": "tshirt_001",
                "outfitName": "기본 티셔츠",
                "type": "Top",
                "topCategory": "Tshirt",
                "texturePath": "https://yourserver.com/textures/tshirt_001.jpg",
                "thumbnailUrl": "https://yourserver.com/thumbnails/tshirt_001.jpg"
            },
            {
                "id": "tshirt_002",
                "outfitName": "프리미엄 티셔츠",
                "type": "Top", 
                "topCategory": "Tshirt",
                "texturePath": "https://yourserver.com/textures/tshirt_002.jpg",
                "thumbnailUrl": "https://yourserver.com/thumbnails/tshirt_002.jpg"
            },
            {
                "id": "shorts_001",
                "outfitName": "기본 반바지",
                "type": "Bottom",
                "bottomCategory": "Shorts", 
                "texturePath": "https://yourserver.com/textures/shorts_001.jpg",
                "thumbnailUrl": "https://yourserver.com/thumbnails/shorts_001.jpg"
            }
        ]
    };
    
    res.json(outfits);
});

// 사용자별 옷 데이터 (확장용)
app.get('/api/users/:userId/outfits', (req, res) => {
    const userId = req.params.userId;
    // 사용자별 보유 옷 목록 반환
    // DB에서 해당 사용자 데이터 조회
});

app.listen(3000, () => {
    console.log('서버가 포트 3000에서 실행 중');
});
```

### PHP 예시:
```php
<?php
// api/outfits.php
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');

$outfits = array(
    "outfits" => array(
        array(
            "id" => "tshirt_001",
            "outfitName" => "기본 티셔츠",
            "type" => "Top",
            "topCategory" => "Tshirt",
            "texturePath" => "https://yourserver.com/textures/tshirt_001.jpg",
            "thumbnailUrl" => "https://yourserver.com/thumbnails/tshirt_001.jpg"
        ),
        array(
            "id" => "shorts_001",
            "outfitName" => "기본 반바지", 
            "type" => "Bottom",
            "bottomCategory" => "Shorts",
            "texturePath" => "https://yourserver.com/textures/shorts_001.jpg",
            "thumbnailUrl" => "https://yourserver.com/thumbnails/shorts_001.jpg"
        )
    )
);

echo json_encode($outfits, JSON_UNESCAPED_UNICODE);
?>
```

## 2. 텍스처 이미지 파일 서버 구조

### 폴더 구조:
```
public/
├── textures/           # 옷 텍스처 이미지들
│   ├── tshirt_001.jpg
│   ├── tshirt_002.jpg
│   ├── shorts_001.jpg
│   └── ...
├── thumbnails/         # 썸네일 이미지들
│   ├── tshirt_001.jpg
│   ├── tshirt_002.jpg
│   ├── shorts_001.jpg
│   └── ...
└── webgl/             # Unity WebGL 빌드 파일들
    ├── Build/
    ├── StreamingAssets/
    └── index.html
```

### 이미지 URL 예시:
```
https://yourserver.com/textures/tshirt_001.jpg
https://yourserver.com/textures/shorts_001.jpg
https://yourserver.com/thumbnails/tshirt_001.jpg
```

## 3. 데이터베이스 구조 (선택사항)

### MySQL 테이블 예시:
```sql
-- 옷 데이터 테이블
CREATE TABLE outfits (
    id VARCHAR(50) PRIMARY KEY,
    outfit_name VARCHAR(100) NOT NULL,
    type ENUM('Top', 'Bottom') NOT NULL,
    top_category ENUM('Tshirt', 'Shirt') NULL,
    bottom_category ENUM('Pants', 'Shorts') NULL,
    texture_path VARCHAR(200) NOT NULL,
    thumbnail_url VARCHAR(200) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 사용자 보유 옷 테이블
CREATE TABLE user_outfits (
    user_id VARCHAR(50),
    outfit_id VARCHAR(50),
    purchased_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (user_id, outfit_id),
    FOREIGN KEY (outfit_id) REFERENCES outfits(id)
);
```

## 4. Unity에서 서버 URL 설정

OutfitDataLoader에서 서버 모드로 변경:
```csharp
// Inspector에서 설정
useLocalFile = false
serverUrl = "https://yourserver.com/api/outfits"
```

또는 웹에서 동적으로 변경:
```javascript
// JavaScript에서 호출
unityInstance.SendMessage('WebGLManager', 'SetServerUrl', 'https://yourserver.com/api/outfits');
unityInstance.SendMessage('WebGLManager', 'ReloadOutfitsFromServer', '');
```

## 5. CORS 및 HTTPS 설정

### CORS 헤더 필수:
```
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, OPTIONS
Access-Control-Allow-Headers: Content-Type
```

### HTTPS 권장:
- Unity WebGL에서 HTTP 이미지 로드 시 브라우저 보안 정책으로 차단될 수 있음
- 텍스처 이미지는 HTTPS로 제공 권장